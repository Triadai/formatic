<!DOCTYPE html>
<html>
<head>
  <link href="./style/formatic.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="./bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
</head>
<body>
  <div class="container-fluid">
    <div id="user"></div>
    <div id="extra"></div>
    <div id="json"></div>
  </div>

  <script src="./bower_components/jquery/dist/jquery.min.js"></script>
  <script src="./bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

  <script src="./lib/formatic.js"></script>
  <script>

    var formatic = require('formatic').create('core', 'bootstrap');

    var form = formatic({
      fields: [
        // {
        //   key: 'firstName',
        //   type: 'string',
        //   label: 'First Name',
        //   maxRows: 1
        // },
        // {
        //   key: 'lastName',
        //   type: 'string',
        //   label: 'Last Name',
        //   maxRows: 1
        // }

        {
          label: 'Short Name',
          type: 'object',
          key: 'name',
          fields: ['firstName', 'lastName', {extends: 'nameType', value: 'short'}, 'silly'],
          match: {type: 'short'}
        },
        {
          label: 'Home Address',
          type: 'object',
          key: 'address_home',
          fields: ['address']
        },
        {
          label: 'Work Address',
          type: 'object',
          key: 'address_work',
          fields: ['address']
        },
        {
          label: 'Other Addresses',
          type: 'object',
          key: 'addresses_other',
          items: ['address']
        },
        {
          label: 'Do you like cookies?',
          type: 'boolean',
          key: 'likesCookies'
        },
        {
          label: 'Colors',
          type: 'array',
          key: 'colors',
          choices: ['red', 'green', 'blue']
        },
        {
          template: true,
          label: 'First Name',
          id: 'firstName',
          type: 'string',
          key: 'first',
          maxRows: 1,
          helpText: 'The name your momma calls you.'
        },
        {
          template: true,
          label: 'Last Name',
          id: 'lastName',
          type: 'string',
          key: 'last',
          maxRows: 1,
          when: [
            'firstName'
          ]
        },
        {
          template: true,
          type: 'string',
          hidden: true,
          id: 'nameType',
          key: 'type'
        },
        {
          template: true,
          type: 'array',
          label: 'Silly',
          id: 'silly',
          choices: [],
          eval: {
            choices: "if( aliases filter( map( slice(aliases 0 __index) fn([alias] get(alias 'first')) ) fn([alias] alias) ) )"
          }
        },
        {
          type: 'array',
          key: 'aliases',
          items: ['name', 'fullName']
        },
        {
          template: true,
          id: 'address',
          label: 'Address',
          type: 'object',
          fields: ['country', 'state', 'city']
        },
        {
          template: true,
          label: 'Country',
          type: 'string',
          key: 'country',
          choices: [],
          eval: {
            choices: "lookup( 'locations' )"
          }
        },
        {
          template: true,
          label: 'State',
          type: 'string',
          key: 'state',
          choices: {},
          eval: {
            choices: "lookup( 'locations' country)"
          }
        },
        {
          template: true,
          label: 'City',
          type: 'string',
          key: 'city',
          choices: [],
          eval: {
            choices: "lookup( 'locations' country state)"
          }
        },
        {
          template: true,
          label: 'Full Name',
          type: 'object',
          key: 'fullName',
          fields: ['firstName', 'middleName', 'lastName', {extends: 'nameType', value: 'full'}, , 'city'],
          match: {type: 'full'}
        },
        {
          template: true,
          label: 'Middle Name',
          id: 'middleName',
          type: 'string',
          key: 'middle',
          maxRows: 1
        }
      ],
      value: {}
    });

    var component = form.component();

    formatic.render(component, document.getElementById('user'));

  </script>
</body>
</html>
