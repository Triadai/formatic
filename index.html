<html>
<head></head>
<body>
  <div id="user"></div>
  <div id="extra"></div>
  <div id="json"></div>
  <script src="./bundle.js"></script>
  <script>
    var formatic = require('formatic')('react');

    var form = formatic();

    form.fields([
      {
        type: 'text',
        key: 'name.first',
        label: 'First Name'
      },
      {
        type: 'text',
        key: 'name.last',
        label: 'Last Name'
      },
      {
        type: 'text',
        key: 'address.city',
        label: 'City'
      },
      {
        type: 'select',
        key: 'address.state',
        label: 'State',
        choices: ['MO', 'IL']
      },
      {
        type: 'select',
        key: 'os',
        label: 'Operating System',
        choices: [
          {value: 'osx', label: 'Mac OS X'},
          {value: 'linux', label: 'Linux'},
          {value: 'vista', label: 'Windows Vista'},
          {value: 'win7', label: 'Windows 7'},
          {value: 'win8', label: 'Windows 8'}
        ]
      },
      {
        type: 'select',
        key: 'mood',
        label: 'How do you feel?',
        choices: {
          happy: 'Happy',
          sad: 'Sad'
        }
      },
      {
        type: 'if',
        fields: [
          {
            type: 'eq',
            fields: [
              {
                type: 'get',
                value: 'mood'
              },
              {
                type: 'string',
                value: 'sad'
              }
            ]
          },
          {
            type: 'code',
            value: 'So sorry!'
          }
        ]
      },
      {
        type: 'textarea',
        key: 'story',
        label: 'Tell me a story'
      }
    ]);

    form.attach(document.getElementById('user'));

    jsonForm = formatic();

    jsonForm.attach(document.getElementById('json'));

    form.on('update', function () {
      jsonForm.fields([
        {
          type: 'code',
          value: JSON.stringify(form.val(), null, 2)
        }
      ]);
    });
  </script>
</body>
</html>
